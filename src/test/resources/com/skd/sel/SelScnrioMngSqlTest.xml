<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.skd.sel.SelScnrioMngTest">
  <insert id="insertTempScnrioData" parameterType="HashMap">
    INSERT INTO skd_sel_test_scnrio
    (
      scnrio_num
    , eff_end_dtm
    , audit_num
    , audit_dtm
    , scnrio_nm
    , op_typ_cd
    , scnrio_desc
    , seq_num
    , src_cd
    , eff_sta_dtm
    )
    SELECT IFNULL(MAX(ssts.scnrio_num) + 1, 1) AS scnrio_num
         , '9999-12-31 23:59:59' AS eff_end_dtm
         , #{user_num} AS audit_num
         , NOW() AS audit_dtm
         , #{scnrio_nm} AS scnrio_nm
         , #{op_typ_cd} AS op_typ_cd
         , #{scnrio_desc} AS scnrio_desc
         , #{seq_num} AS seq_num
         , #{src_cd} AS src_cd
         , #{eff_sta_dtm} AS eff_sta_dtm
    FROM   skd_sel_test_scnrio ssts
  </insert>
  <select id="getInsertedTempScnrioData" parameterType="HashMap" resultType="HashMap">
    SELECT MAX(ssts.scnrio_num) AS scnrio_num
    FROM   skd_sel_test_scnrio ssts
  </select>
</mapper>